<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Éditeur Produits - Hyping-style</title>
<style>
  body{font-family:system-ui, sans-serif;background:#f7f7fb;margin:0;padding:20px;color:#222;}
  h1{margin-bottom:20px;}
  textarea{width:100%;height:70vh;padding:12px;border:1px solid #ccc;border-radius:10px;font-family:monospace;}
  .btns{margin-top:12px;display:flex;gap:10px;}
  button{padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:600;}
  .load{background:#a0c4ff;}
  .save{background:#a8d5ba;}
</style>
</head>
<body>

<h1>Éditeur de produits</h1>

<textarea id="editor">// Clique sur "Charger" pour afficher products.json</textarea>

<div class="btns">
  <button class="load" id="loadBtn">Charger</button>
  <button class="save" id="saveBtn">Télécharger</button>
</div>

<script>
const editor=document.getElementById("editor");

document.getElementById("loadBtn").onclick=async()=>{
  try{
    const res=await fetch("products.json");
    const json=await res.json();
    editor.value=JSON.stringify(json,null,2);
  }catch(e){
    alert("Erreur lors du chargement : "+e.message);
  }
};

document.getElementById("saveBtn").onclick=()=>{
  try{
    const data=JSON.parse(editor.value); // validation JSON
    const blob=new Blob([JSON.stringify(data,null,2)],{type:"application/json"});
    const a=document.createElement("a");
    a.href=URL.createObjectURL(blob);
    a.download="products.json";
    a.click();
    URL.revokeObjectURL(a.href);
  }catch(e){
    alert("JSON invalide : "+e.message);
  }
};
</script>

</body>
</html>
